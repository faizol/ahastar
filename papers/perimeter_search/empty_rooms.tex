\section{Rooms-based Symmetry Reduction}
In a pathfinding context, search space symmetry manifests itself as identical
length paths connecting arbitrary pairs of nodes in a graph. 
Symmetry is undesirable in this case as it forces search algorithms to evaluate 
many equivalent states and prevents real progress toward the goal.
For example, the $f$-value associated with a node $n$ lying along an arbitrary
 path segment is identical to the $f$-values of all its symmetric counterparts.
In order to gurantee optimality, search algorithms such as A* will always prioritise
nodes with smaller $f$-values over those with higher $f$-values. This leads to
necessarily expanding $n$ and all its counterparts before examining any other
nodes which may lie closer to the goal.
\par
%% DH: Do we need to discuss/motivate symmetry in grid maps?
% Would an example/figure be helpful here? 
We will use the following high-level strategy to identify and eliminate 
path symmetries from arbitrary uniform-cost grid maps: 
\input alg_rsr
\\
In \cite{harabor10} the same approach is used to develop the 4ERA algorithm.
Here, we extend that work in two directions:
\begin{enumerate}
\item{
We modify Step \ref{alg:rsr:2} of Algorithm \ref{alg:rsr} 
to include pruning of nodes from the perimeter of an empty room.
}
\item{
We modify Steps \ref{alg:rsr:3} and \ref{alg:rsr:4} of Algorithm
\ref{alg:rsr} in order to facilitate optimal room traversal in 8-connected grid
maps. 
}
\end{enumerate}
As we will see, the first enhancement can significantly reduce the number of nodes
in the search space and results in a considerable speedup when compared to 4ERA.
The genralisation to 8-connected grids however is more challenging.
In particular, the branching factor associated with each remaining perimeter tile 
can become linear in the size of the largest dimension (length or width) of the local room. 
This number is often much larger than 8. 
By comparison, on a 4-connected map no tile requires more than one macro-edge 
to retain optimality and thus the branching factor remains low. 
Keeping the branching factor within reasonable limits is the primary motivation
for our final enhancement: a novel online pruning strategy which attempts to
reduce the number of neighbours that need to be considered during each node 
expansion operation.
\par
Both speedup enhancements, which we introduce in the following two sections, 
are applicable to 4 and 8-connected grid maps and both preserve optimality
during search.
We term the resultant algorithm \emph{Rooms-based Symmetry Reduction} 
(or RSR for short).
%\newline \\
%\textbf{Symmetry Reduction in 8-connected Grid Maps:}
%Consider a path which enters an empty room $R$ at some perimeter node $m$ and exits at some other
%node $n$ located on the opposite side of the room.
%On a 4-connected map we can optimally traverse the room by expanding $m$, following
%its macro edge to a node $m'$ on the opposite side of $R$ and finally navigating from $m'$ to $n$.
%The length of this path is equal to the Manhattan distance between $m$ and $n$ and thus optimal.
%However, if the map consists of 8-connected tiles this strategy is no longer optimal.
%In particular, the original (unmodified) map may contain a more direct path to $n$ using one or more diagonal
%transtions.
%\par
%We address this problem as follows:
%First, we give an offline procedure which adds to $R$ a set of additional macro edges
%to facilitate optimal travel between arbitrary pairs of tiles on the perimeter.
%Second, we give an online re-insertion procedure which deals with cases where the start or
%goal is a tile that has been previously removed.
%Finally, we show that this method preserves optimality.
